var AWSDRUrchin={protocol:("https:"===document.location.protocol?"https://":"http://"),init:function(){var b=document.getElementsByTagName("HEAD").item(0);var c=document.createElement("script");c.type="text/javascript";var a=this;if(c.readyState){c.onreadystatechange=function(){if(c.readyState==="loaded"||c.readyState==="complete"){c.onreadystatechange=null;a.amznUrchinTracker()}}}else{c.onload=function(){a.amznUrchinTracker()}}c.src=this.protocol+this.config.urchinJsPath;b.appendChild(c)},amznUrchinTracker:function(){_uanchor=1;_udn="amazon.com";_ulink=1;_uhash="on";_ugifpath=this.protocol+this.config.urchinGifPath;this.validateUrchinSession();var a=null;if(typeof __amznUtmPage!=="undefined"){a=__amznUtmPage}else{if(typeof __amznUtmPagePostfix!=="undefined"){a=document.location.pathname+"/"+__amznUtmPagePostfix+document.location.search}}urchinTracker(a)},getCookieValue:function(f){if(!f){return null}var a=f+"=";var d=document.cookie.split(/;\s/g);for(var b=0;b<d.length;b++){var e=d[b];while(e.charAt(0)==" "){e=e.substring(1,e.length)}if(e.indexOf(a)===0){return e.substring(a.length,e.length)}}return null},deleteCookie:function(a){if(!a){return}document.cookie=a+"=;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/; domain=amazon.com;"},validateUrchinSession:function(){var a=this.getCookieValue(this.config.urchinAWSXCookieKey);var b=this.getCookieValue("__utmv");if(a&&!b){__utmSetVar(this.getUrchinUtmValue(a))}else{if(a&&b&&(b.indexOf(_uES(a))==-1)){this.destroyUrchinSession();__utmSetVar(this.getUrchinUtmValue(a))}else{if(this.shouldDeleteUrchinUserCustomCookie(b)){this.deleteCookie("__utmv")}}}},destroyUrchinSession:function(){this.deleteCookie("__utmc");this.deleteCookie("__utmb")},shouldDeleteUrchinUserCustomCookie:function(a){if(this.config.urchinBeta){return a&&a.indexOf(this.config.urchinBetaXvalPrefix)==-1}return a&&a.indexOf(this.config.urchinBetaXvalPrefix)!=-1},getUrchinUtmValue:function(a){if(this.config.urchinBeta){return this.config.urchinBetaXvalPrefix+a}return a},config:{urchinJsPath:"media.amazonwebservices.com/urchin.js",urchinBetaXvalPrefix:"INTEG",urchinGifPath:"aws.amazon.com/amznutm/__utm.gif",urchinAWSXCookieKey:"aws-x-main",urchinBeta:false}};AWSDRUrchin.init();
